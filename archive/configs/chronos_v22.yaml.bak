# Chronos Engine v2.2 Configuration
# Enhanced with sub-tasks, event linking, workflows, and security features

# Core Settings
version: "2.2"
debug: false
timezone: "UTC"

# Database Configuration
database:
  url: "sqlite+aiosqlite:///./data/chronos.db"
  echo_sql: false
  pool_size: 10
  max_overflow: 20

# API Configuration
api:
  host: "0.0.0.0"
  port: 8000
  api_key: "your-secure-api-key-here"
  cors_origins: ["http://localhost:3000", "http://localhost:8080"]
  rate_limit: "100/minute"

# Plugin Configuration
plugins:
  enabled: true
  custom_dir: "plugins/custom"
  auto_load: true

# Command Handler Plugin (v2.1)
command_handler:
  enabled: true
  action_whitelist:
    - "SHUTDOWN"
    - "REBOOT"
    - "SEND_MESSAGE"
    - "RUN_BACKUP"
    - "STATUS_CHECK"
    - "DEPLOY"
    - "RESTART_SERVICE"
    - "UPDATE_CONFIG"
    - "SYNC_DATA"
    - "GENERATE_REPORT"

# UNDEFINED Guard Plugin (v2.2)
undefined_guard:
  enabled: true
  extra_patterns:
    - "^acti[oa]n\\s*:"    # Common typos for action
    - "^comand\\s*:"        # Common typo for command
    - "^note\\s*:"          # Alternative to notiz

# Action Workflows (v2.2)
action_workflows:
  - trigger_command: "DEPLOY"
    trigger_system: "production"
    follow_up_command: "STATUS_CHECK"
    follow_up_system: "monitoring"
    delay_seconds: 30
    follow_up_params:
      check_type: "post_deploy"
      timeout: 300

  - trigger_command: "BACKUP"
    trigger_system: "database"
    follow_up_command: "SEND_MESSAGE"
    follow_up_system: "notification"
    delay_seconds: 0
    follow_up_params:
      recipient: "admin@company.com"
      template: "backup_complete"

  - trigger_command: "UPDATE_CONFIG"
    trigger_system: "web_server"
    follow_up_command: "RESTART_SERVICE"
    follow_up_system: "web_server"
    delay_seconds: 10
    follow_up_params:
      graceful: true
      timeout: 60

# Calendar Integration
calendar:
  provider: "google"
  default_calendar: "primary"
  sync_interval: 300  # 5 minutes
  days_ahead: 30
  enable_two_way_sync: true

# Scheduling Engine
scheduler:
  enabled: true
  default_working_hours:
    start: "09:00"
    end: "17:00"
    break_start: "12:00"
    break_end: "13:00"
    working_days: [1, 2, 3, 4, 5]  # Monday to Friday

  optimization:
    enabled: true
    consider_travel_time: true
    respect_focus_blocks: true
    minimize_conflicts: true

# v2.2 Features Configuration

# Sub-tasks (Checklists)
sub_tasks:
  enabled: true
  auto_parse: true
  completion_triggers_event: true  # Mark event complete when all sub-tasks done
  checkbox_patterns:
    - "\\[\\s*\\]"     # [ ]
    - "\\[x\\]"        # [x]
    - "\\[X\\]"        # [X]

# Event Linking
event_links:
  enabled: true
  max_links_per_event: 20
  allowed_link_types:
    - "related"
    - "depends_on"
    - "blocks"
    - "child_of"
    - "follows"
    - "references"

# Availability Checking
availability:
  enabled: true
  slot_duration_minutes: 30
  max_attendees_per_request: 50
  cache_duration_minutes: 15
  include_travel_time: true

# Analytics and Reporting
analytics:
  enabled: true
  track_productivity: true
  track_completion_rates: true
  track_stress_levels: true
  retention_days: 365

# Security Settings
security:
  api_key_rotation_days: 90
  command_timeout_seconds: 300
  max_workflow_depth: 5  # Prevent infinite workflow loops
  audit_log: true
  encrypt_sensitive_data: true

# Logging Configuration
logging:
  level: "INFO"
  format: "%(asctime)s - %(name)s - %(levelname)s - %(message)s"
  file: "./logs/chronos.log"
  rotation: "daily"
  retention: 30

# Performance Settings
performance:
  cache_size: 1000
  batch_size: 100
  parallel_processing: true
  max_workers: 4

# Notification Settings
notifications:
  enabled: true
  providers:
    email:
      enabled: true
      smtp_server: "smtp.gmail.com"
      smtp_port: 587
      use_tls: true
    webhook:
      enabled: true
      default_url: "https://your-webhook-url.com/chronos"

# Feature Flags (v2.2)
features:
  sub_tasks: true
  event_links: true
  availability_check: true
  action_workflows: true
  undefined_guard: true
  advanced_parsing: true
  ai_suggestions: false  # Future feature
  voice_commands: false  # Future feature