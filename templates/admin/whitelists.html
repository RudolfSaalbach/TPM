{% extends "admin/base.html" %}

{% block title %}Whitelists - Chronos Admin{% endblock %}
{% block header_title %}System Whitelists{% endblock %}
{% block header_subtitle %}Zul√§ssige Systeme, Aktionen und Parameter f√ºr externe Integrationen{% endblock %}

{% block header_actions %}
<a href="/admin/whitelists/new" class="btn btn-primary">
    <span aria-hidden="true">‚ûï</span>
    Neue Whitelist
</a>
{% endblock %}

{% block content %}
<div class="whitelists-overview animate-fade-in">
    <div class="whitelists-list animate-stagger">
        {% for whitelist in whitelists %}
        <div class="card whitelist-card">
            <div class="whitelist-header">
                <h3 class="whitelist-title">{{ whitelist.name }}</h3>
                <div class="whitelist-status">
                    <span class="status-indicator {{ 'active' if whitelist.enabled else 'inactive' }}"></span>
                    <span>{{ 'Aktiv' if whitelist.enabled else 'Inaktiv' }}</span>
                </div>
            </div>
            <p class="whitelist-description">{{ whitelist.description or 'Keine Beschreibung verf√ºgbar' }}</p>
            <div class="whitelist-meta">
                <span class="meta-item">
                    <span class="meta-label">Typ:</span>
                    <span class="meta-value">{{ whitelist.type }}</span>
                </span>
                <span class="meta-item">
                    <span class="meta-label">Eintr√§ge:</span>
                    <span class="meta-value">{{ whitelist.entries|length if whitelist.entries else 0 }}</span>
                </span>
                <span class="meta-item">
                    <span class="meta-label">Erstellt:</span>
                    <span class="meta-value">{{ whitelist.created_at.strftime('%d.%m.%Y') if whitelist.created_at else '‚Äî' }}</span>
                </span>
            </div>
            <div class="whitelist-actions">
                <a href="/admin/whitelists/{{ whitelist.id }}" class="btn btn-secondary btn-sm">Bearbeiten</a>
                <button onclick="toggleWhitelist({{ whitelist.id }})" class="btn btn-ghost btn-sm">
                    {{ 'Deaktivieren' if whitelist.enabled else 'Aktivieren' }}
                </button>
            </div>
        </div>
        {% else %}
        <div class="placeholder">
            <div class="placeholder-icon">üõ°Ô∏è</div>
            <div class="placeholder-title">Keine Whitelists gefunden</div>
            <div class="placeholder-text">Erstellen Sie Ihre erste Whitelist f√ºr externe Integrationen.</div>
            <a href="/admin/whitelists/new" class="btn btn-primary">Whitelist erstellen</a>
        </div>
        {% endfor %}
    </div>
</div>

<style>
.whitelists-list {
    display: grid;
    gap: var(--space-5);
}

.whitelist-card {
    display: flex;
    flex-direction: column;
    gap: var(--space-4);
}

.whitelist-header {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    gap: var(--space-4);
}

.whitelist-title {
    margin: 0;
    font-size: var(--font-size-lg);
    font-weight: var(--font-weight-semibold);
    color: var(--text-primary);
}

.whitelist-status {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    font-size: var(--font-size-sm);
    color: var(--text-secondary);
}

.status-indicator {
    width: 8px;
    height: 8px;
    border-radius: var(--radius-full);
}

.status-indicator.active {
    background: var(--success-500);
}

.status-indicator.inactive {
    background: var(--neutral-400);
}

.whitelist-description {
    color: var(--text-secondary);
    line-height: var(--line-height-relaxed);
    margin: 0;
}

.whitelist-meta {
    display: flex;
    gap: var(--space-6);
    flex-wrap: wrap;
    font-size: var(--font-size-sm);
}

.meta-item {
    display: flex;
    gap: var(--space-2);
}

.meta-label {
    color: var(--text-muted);
}

.meta-value {
    color: var(--text-primary);
    font-weight: var(--font-weight-medium);
}

.whitelist-actions {
    display: flex;
    gap: var(--space-3);
    margin-top: auto;
}
</style>

<script>
function toggleWhitelist(id) {
    if (confirm('M√∂chten Sie den Status dieser Whitelist √§ndern?')) {
        // Hier w√ºrde die tats√§chliche Toggle-Logik stehen
        showToast('Whitelist', 'Status erfolgreich ge√§ndert', 'success');
        setTimeout(() => location.reload(), 1000);
    }
}

function showToast(title, message, type) {
    console.log(`${type.toUpperCase()}: ${title} - ${message}`);
}
</script>
{% endblock %}