<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - Chronos Engine</title>

    <!-- Inter Font -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <!-- Premium CSS -->
    <link rel="stylesheet" href="/static/css/chronos-premium.css">
</head>
<body>
    <!-- Skip Link f√ºr Barrierefreiheit -->
    <a href="#main-content" class="skip-link">Zum Hauptinhalt springen</a>

    <div class="app-container">
        <!-- Sidebar Overlay f√ºr Mobile -->
        <div class="sidebar-overlay" id="sidebarOverlay" onclick="closeSidebar()"></div>

        <!-- Sidebar Navigation -->
        <nav class="sidebar" id="sidebar" role="navigation" aria-label="Hauptnavigation">
            <div class="sidebar-header">
                <a href="/" class="logo">
                    <div class="logo-icon" aria-hidden="true">‚è∞</div>
                    <span class="logo-text">Chronos</span>
                </a>
            </div>

            <div class="sidebar-nav">
                <a href="/dashboard" class="nav-item active" aria-current="page">
                    <div class="nav-item-indicator"></div>
                    <span class="nav-icon" role="img" aria-label="Dashboard">üìä</span>
                    <span>Dashboard</span>
                </a>
                <a href="/calendar" class="nav-item">
                    <div class="nav-item-indicator"></div>
                    <span class="nav-icon" role="img" aria-label="Kalender">üìÖ</span>
                    <span>Kalender</span>
                </a>
                <a href="/events" class="nav-item">
                    <div class="nav-item-indicator"></div>
                    <span class="nav-icon" role="img" aria-label="Events">üìã</span>
                    <span>Events</span>
                </a>
                <a href="/analytics" class="nav-item">
                    <div class="nav-item-indicator"></div>
                    <span class="nav-icon" role="img" aria-label="Analytics">üìà</span>
                    <span>Analytics</span>
                </a>
                <a href="/settings" class="nav-item">
                    <div class="nav-item-indicator"></div>
                    <span class="nav-icon" role="img" aria-label="Einstellungen">‚öôÔ∏è</span>
                    <span>Einstellungen</span>
                </a>
            </div>
        </nav>

        <!-- Main Content Area -->
        <main class="main-content" id="main-content">
            <!-- Header -->
            <header class="header">
                <div class="header-content">
                    <div class="header-title">
                        <h1>Dashboard</h1>
                        <p class="header-subtitle">Willkommen zur√ºck! Hier ist deine √úbersicht f√ºr heute.</p>
                    </div>
                    <div class="header-actions">
                        <button class="btn btn-secondary" onclick="toggleSidebar()" aria-label="Seitenleiste umschalten">
                            <span aria-hidden="true">‚ò∞</span>
                        </button>
                        <button class="btn btn-secondary" onclick="refreshDashboard()" aria-label="Dashboard aktualisieren">
                            <span aria-hidden="true">üîÑ</span>
                            Aktualisieren
                        </button>
                        <button class="btn btn-primary" onclick="syncCalendar()" aria-label="Kalendersynchronisation starten">
                            <span aria-hidden="true">‚ö°</span>
                            Sync starten
                        </button>
                    </div>
                </div>
            </header>

            <!-- Dashboard Content -->
            <div class="dashboard-content animate-fade-in">
                <!-- Stats Grid -->
                <section aria-labelledby="stats-heading">
                    <h2 id="stats-heading" class="sr-only">Leistungsmetriken</h2>
                    <div class="stats-grid animate-stagger">
                        <article class="metric-card">
                            <div class="metric-header">
                                <span class="metric-label">Gesamte Events</span>
                                <div class="metric-icon" aria-hidden="true">üìÖ</div>
                            </div>
                            <div class="metric-value" id="totalEvents">{{ productivity_metrics.total_events or 0 }}</div>
                            <div class="metric-change positive" id="eventsChange">
                                <span aria-label="Anstieg">‚Üó</span>
                                <span>+18% diese Woche</span>
                            </div>
                        </article>

                        <article class="metric-card">
                            <div class="metric-header">
                                <span class="metric-label">Produktivit√§tsrate</span>
                                <div class="metric-icon" aria-hidden="true">üéØ</div>
                            </div>
                            <div class="metric-value" id="productivityRate">{{ "%.1f" | format((productivity_metrics.completion_rate or 0.873) * 100) }}%</div>
                            <div class="metric-change positive" id="productivityChange">
                                <span aria-label="Anstieg">‚Üó</span>
                                <span>+5.2% vs. letzten Monat</span>
                            </div>
                        </article>

                        <article class="metric-card">
                            <div class="metric-header">
                                <span class="metric-label">Focus Time</span>
                                <div class="metric-icon" aria-hidden="true">‚è±Ô∏è</div>
                            </div>
                            <div class="metric-value" id="timeSaved">{{ "%.1f" | format(productivity_metrics.total_hours or 4.5) }}h</div>
                            <div class="metric-change positive" id="timeSavedChange">
                                <span aria-label="Anstieg">‚Üó</span>
                                <span>+30min heute</span>
                            </div>
                        </article>

                        <article class="metric-card">
                            <div class="metric-header">
                                <span class="metric-label">Abgeschlossene Tasks</span>
                                <div class="metric-icon" aria-hidden="true">‚úÖ</div>
                            </div>
                            <div class="metric-value" id="completedTasks">{{ productivity_metrics.completed_tasks or 0 }}</div>
                            <div class="metric-change negative" id="tasksChange">
                                <span aria-label="R√ºckgang">‚Üì</span>
                                <span>-3 vs. gestern</span>
                            </div>
                        </article>

                        <article class="metric-card">
                            <div class="metric-header">
                                <span class="metric-label">Sync Status</span>
                                <div class="metric-icon" aria-hidden="true">üîÑ</div>
                            </div>
                            <div class="metric-value" style="font-size: 18px;" id="syncStatus">
                                <span class="status-indicator active" aria-hidden="true"></span>
                                Verbunden
                            </div>
                            <div class="metric-change neutral" id="lastUpdate">
                                vor 3 Min
                            </div>
                        </article>

                        <article class="metric-card">
                            <div class="metric-header">
                                <span class="metric-label">CalDAV Events</span>
                                <div class="metric-icon" aria-hidden="true">üìä</div>
                            </div>
                            <div class="metric-value" id="caldavEvents">{{ caldav_events or 0 }}</div>
                            <div class="metric-change positive" id="caldavChange">
                                <span aria-label="Anstieg">‚Üó</span>
                                <span>+7 neue Events</span>
                            </div>
                        </article>
                    </div>
                </section>

                <!-- Charts Section -->
                <section aria-labelledby="charts-heading">
                    <h2 id="charts-heading" class="sr-only">Diagramme</h2>
                    <div class="charts-grid">
                        <div class="chart-card">
                            <div class="chart-header">
                                <div>
                                    <h3 class="chart-title">Wochen√ºbersicht</h3>
                                    <p class="chart-subtitle">Produktivit√§t der letzten 7 Tage</p>
                                </div>
                            </div>
                            <div class="chart-placeholder" role="img" aria-label="S√§ulendiagramm der Wochenproduktivit√§t">
                                <div class="chart-bar" style="height: 60%"></div>
                                <div class="chart-bar" style="height: 80%"></div>
                                <div class="chart-bar" style="height: 70%"></div>
                                <div class="chart-bar" style="height: 90%"></div>
                                <div class="chart-bar" style="height: 85%"></div>
                                <div class="chart-bar" style="height: 95%"></div>
                                <div class="chart-bar" style="height: 75%"></div>
                            </div>
                        </div>

                        <div class="chart-card">
                            <div class="chart-header">
                                <div>
                                    <h3 class="chart-title">Priorit√§tsverteilung</h3>
                                    <p class="chart-subtitle">Aktuelle Events</p>
                                </div>
                            </div>
                            <div style="display: flex; flex-direction: column; gap: var(--space-4);">
                                <div style="display: flex; align-items: center; gap: var(--space-3);">
                                    <div style="width: 100%; height: 32px; background: linear-gradient(90deg, var(--danger-500) 25%, var(--border-subtle) 25%); border-radius: var(--radius-full);"></div>
                                    <span style="white-space: nowrap; font-size: var(--font-size-sm);">Hoch (25%)</span>
                                </div>
                                <div style="display: flex; align-items: center; gap: var(--space-3);">
                                    <div style="width: 100%; height: 32px; background: linear-gradient(90deg, var(--warning-400) 45%, var(--border-subtle) 45%); border-radius: var(--radius-full);"></div>
                                    <span style="white-space: nowrap; font-size: var(--font-size-sm);">Mittel (45%)</span>
                                </div>
                                <div style="display: flex; align-items: center; gap: var(--space-3);">
                                    <div style="width: 100%; height: 32px; background: linear-gradient(90deg, var(--success-500) 30%, var(--border-subtle) 30%); border-radius: var(--radius-full);"></div>
                                    <span style="white-space: nowrap; font-size: var(--font-size-sm);">Niedrig (30%)</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Recent Events Section -->
                <section class="events-section" aria-labelledby="events-heading">
                    <div class="section-header">
                        <h2 id="events-heading" class="chart-title">Heutige Events</h2>
                        <button class="btn btn-secondary">Alle anzeigen</button>
                    </div>

                    <div class="event-list" id="todayEventsList">
                        <!-- Events werden dynamisch √ºber loadTodayEvents() geladen -->
                        <div class="loading-events" id="eventsLoading">
                            <div class="spinner" style="width: 20px; height: 20px;"></div>
                            <span>Events werden geladen...</span>
                        </div>
                    </div>
                </section>
            </div>
        </main>
    </div>

    <!-- Floating Action Button -->
    <button class="fab" onclick="createNewEvent()" aria-label="Neues Event erstellen">
        <span aria-hidden="true">‚ûï</span>
    </button>

    <!-- Toast Container -->
    <div class="toast-container" id="toastContainer" role="region" aria-live="polite" aria-label="Benachrichtigungen"></div>

    <!-- Loading Overlay -->
    <div class="modal-overlay" id="loadingOverlay" style="display: none;" aria-hidden="true">
        <div class="spinner"></div>
    </div>

    <!-- JavaScript -->
    <script>
        // Globale Variablen
        let sidebarOpen = false;
        let currentTheme = localStorage.getItem('theme') || 'auto';

        // DOM Content Loaded
        document.addEventListener('DOMContentLoaded', function() {
            initializeApp();
            loadDashboardData();
            setupEventListeners();
        });

        // App Initialization
        function initializeApp() {
            loadSidebarState();
            applyTheme();

            // ARIA-Unterst√ºtzung f√ºr Toast-Container
            const toastContainer = document.getElementById('toastContainer');
            if (toastContainer) {
                toastContainer.setAttribute('aria-live', 'polite');
                toastContainer.setAttribute('aria-atomic', 'true');
            }
        }

        // Event Listeners Setup
        function setupEventListeners() {
            // Keyboard Navigation
            document.addEventListener('keydown', handleKeyboardNavigation);

            // Escape key f√ºr Modals
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape') {
                    closeSidebar();
                }
            });

            // Responsive Sidebar
            window.addEventListener('resize', function() {
                if (window.innerWidth > 768 && sidebarOpen) {
                    closeSidebar();
                }
            });
        }

        // Keyboard Navigation
        function handleKeyboardNavigation(e) {
            // Alt + M: Toggle Sidebar
            if (e.altKey && e.key === 'm') {
                e.preventDefault();
                toggleSidebar();
            }

            // Alt + R: Refresh Dashboard
            if (e.altKey && e.key === 'r') {
                e.preventDefault();
                refreshDashboard();
            }

            // Alt + S: Sync Calendar
            if (e.altKey && e.key === 's') {
                e.preventDefault();
                syncCalendar();
            }
        }

        // Sidebar Functions
        function toggleSidebar() {
            const sidebar = document.getElementById('sidebar');
            const overlay = document.getElementById('sidebarOverlay');

            if (window.innerWidth <= 768) {
                sidebarOpen = !sidebarOpen;
                sidebar.classList.toggle('open', sidebarOpen);
                overlay.classList.toggle('open', sidebarOpen);

                // ARIA
                sidebar.setAttribute('aria-hidden', !sidebarOpen);

                // Focus Management
                if (sidebarOpen) {
                    sidebar.querySelector('.nav-item').focus();
                }
            }
        }

        function closeSidebar() {
            const sidebar = document.getElementById('sidebar');
            const overlay = document.getElementById('sidebarOverlay');

            sidebarOpen = false;
            sidebar.classList.remove('open');
            overlay.classList.remove('open');
            sidebar.setAttribute('aria-hidden', 'true');
        }

        function loadSidebarState() {
            // Load nur f√ºr Desktop relevant
            if (window.innerWidth > 768) {
                const isCollapsed = localStorage.getItem('sidebarCollapsed') === 'true';
                if (isCollapsed) {
                    document.querySelector('.app-container').classList.add('sidebar-collapsed');
                }
            }
        }

        // Theme Functions
        function applyTheme() {
            const theme = localStorage.getItem('theme') || 'auto';
            document.documentElement.setAttribute('data-theme', theme);
        }

        // Dashboard Functions
        async function refreshDashboard() {
            showLoading();
            try {
                await loadDashboardData();
                showToast('Dashboard aktualisiert', 'Alle Daten wurden erfolgreich geladen', 'success');
            } catch (error) {
                showToast('Fehler', 'Dashboard konnte nicht aktualisiert werden', 'error');
            } finally {
                hideLoading();
            }
        }

        async function syncCalendar() {
            showToast('Synchronisation gestartet', 'Kalender wird synchronisiert...', 'info');

            try {
                const response = await fetch('/api/v1/sync/incremental', {
                    method: 'POST',
                    headers: {
                        'Authorization': `Bearer ${window.CHRONOS_CONFIG.API_KEY}`,
                        'Content-Type': 'application/json'
                    }
                });

                if (!response.ok) {
                    throw new Error(`HTTP ${response.status}: ${response.statusText}`);
                }

                const data = await response.json();
                showToast('Sync erfolgreich', data.message || 'Kalender wurde erfolgreich synchronisiert', 'success');
                await refreshDashboard();

            } catch (error) {
                console.error('Sync error:', error);
                showToast('Sync Fehler', 'Synchronisation fehlgeschlagen: ' + error.message, 'error');
            }
        }

        async function triggerFullSync() {
            showLoading();
            try {
                const response = await fetch('/api/v1/sync/full', {
                    method: 'POST',
                    headers: {
                        'Authorization': `Bearer ${window.CHRONOS_CONFIG.API_KEY}`,
                        'Content-Type': 'application/json'
                    }
                });

                if (!response.ok) {
                    throw new Error(`HTTP ${response.status}: ${response.statusText}`);
                }

                const data = await response.json();
                showToast('Full Sync erfolgreich', data.message || 'Vollst√§ndige Synchronisation abgeschlossen', 'success');
                await refreshDashboard();

            } catch (error) {
                console.error('Full sync error:', error);
                showToast('Sync Fehler', 'Vollst√§ndige Synchronisation fehlgeschlagen: ' + error.message, 'error');
            } finally {
                hideLoading();
            }
        }

        // Data Loading
        async function loadDashboardData() {
            try {
                const response = await fetch('/api/v1/dashboard-data');
                if (!response.ok) {
                    throw new Error(`HTTP ${response.status}`);
                }
                const data = await response.json();

                // Update Metrics
                updateMetrics(data.metrics || {});

                // Update Sync Status
                updateSyncStatus(data.sync_status || {});

                // Load today's events
                await loadTodayEvents();

            } catch (error) {
                console.error('Fehler beim Laden der Dashboard-Daten:', error);
                showToast('Fehler', 'Dashboard-Daten konnten nicht geladen werden', 'error');
            }
        }

        async function loadTodayEvents() {
            try {
                const today = new Date().toISOString().split('T')[0];
                const response = await fetch(`/api/v1/events?date=${today}`, {
                    headers: {
                        'Authorization': `Bearer ${window.CHRONOS_CONFIG.API_KEY}`
                    }
                });

                if (!response.ok) {
                    throw new Error(`HTTP ${response.status}`);
                }

                const events = await response.json();
                displayTodayEvents(events);

            } catch (error) {
                console.error('Fehler beim Laden der heutigen Events:', error);
                document.getElementById('eventsLoading').innerHTML =
                    '<p style="color: var(--text-muted); text-align: center;">Keine Events f√ºr heute gefunden</p>';
            }
        }

        function displayTodayEvents(events) {
            const eventsList = document.getElementById('todayEventsList');
            const loading = document.getElementById('eventsLoading');

            if (loading) {
                loading.remove();
            }

            if (!events || events.length === 0) {
                eventsList.innerHTML = '<p style="color: var(--text-muted); text-align: center;">Keine Events f√ºr heute</p>';
                return;
            }

            eventsList.innerHTML = events.map(event => {
                const startTime = new Date(event.start_time).toLocaleTimeString('de-DE', {
                    hour: '2-digit',
                    minute: '2-digit'
                });

                const endTime = event.end_time ? new Date(event.end_time).toLocaleTimeString('de-DE', {
                    hour: '2-digit',
                    minute: '2-digit'
                }) : null;

                const duration = endTime ? ` - ${endTime}` : '';
                const priority = event.priority || 'medium';

                return `
                    <article class="event-item" onclick="viewEventDetails('${event.id}')">
                        <time class="event-time" datetime="${event.start_time}">${startTime}${duration}</time>
                        <div class="event-details">
                            <h3>${event.summary || event.title}</h3>
                            <p class="event-meta">${event.description || 'Kein Beschreibung'}</p>
                        </div>
                        <div class="priority-label ${priority}">
                            <span class="sr-only">${priority === 'high' ? 'Hohe' : priority === 'low' ? 'Niedrige' : 'Mittlere'} Priorit√§t</span>
                            ${priority === 'high' ? 'Hoch' : priority === 'low' ? 'Niedrig' : 'Mittel'}
                        </div>
                    </article>
                `;
            }).join('');
        }

        function viewEventDetails(eventId) {
            // Event-Details in Modal anzeigen
            fetch(`/api/v1/events/${eventId}`, {
                headers: {
                    'Authorization': `Bearer ${window.CHRONOS_CONFIG.API_KEY}`
                }
            })
            .then(response => response.json())
            .then(event => {
                const startTime = new Date(event.start_time).toLocaleString('de-DE');
                const endTime = event.end_time ? new Date(event.end_time).toLocaleString('de-DE') : 'Offen';

                showModal('event-details', event.summary || event.title, `
                    <div style="display: flex; flex-direction: column; gap: var(--space-4);">
                        <div>
                            <strong>Startzeit:</strong> ${startTime}
                        </div>
                        <div>
                            <strong>Endzeit:</strong> ${endTime}
                        </div>
                        ${event.description ? `
                            <div>
                                <strong>Beschreibung:</strong><br>
                                ${event.description}
                            </div>
                        ` : ''}
                        ${event.location ? `
                            <div>
                                <strong>Ort:</strong> ${event.location}
                            </div>
                        ` : ''}
                        <div>
                            <strong>Priorit√§t:</strong>
                            <span class="priority-label ${event.priority || 'medium'}">${
                                event.priority === 'high' ? 'Hoch' :
                                event.priority === 'low' ? 'Niedrig' : 'Mittel'
                            }</span>
                        </div>
                    </div>
                `, [
                    { text: 'Schlie√üen', action: 'closeModal', class: 'btn-primary' }
                ]);
            })
            .catch(error => {
                console.error('Fehler beim Laden der Event-Details:', error);
                showToast('Fehler', 'Event-Details konnten nicht geladen werden', 'error');
            });
        }

        function updateMetrics(metrics) {
            const elements = {
                totalEvents: metrics.total_events || 0,
                productivityRate: ((metrics.completion_rate || 0) * 100).toFixed(1) + '%',
                timeSaved: (metrics.total_hours || 0).toFixed(1) + 'h',
                completedTasks: metrics.completed_tasks || 0,
                caldavEvents: metrics.caldav_events || 0
            };

            Object.entries(elements).forEach(([id, value]) => {
                const element = document.getElementById(id);
                if (element) {
                    element.textContent = value;
                }
            });
        }

        function updateSyncStatus(syncStatus) {
            const lastUpdate = document.getElementById('lastUpdate');
            if (lastUpdate) {
                if (syncStatus.last_update) {
                    const updateTime = new Date(syncStatus.last_update);
                    const now = new Date();
                    const diffMinutes = Math.floor((now - updateTime) / (1000 * 60));

                    if (diffMinutes < 1) {
                        lastUpdate.textContent = 'gerade eben';
                    } else if (diffMinutes < 60) {
                        lastUpdate.textContent = `vor ${diffMinutes} Min`;
                    } else {
                        const diffHours = Math.floor(diffMinutes / 60);
                        lastUpdate.textContent = `vor ${diffHours} Std`;
                    }
                } else {
                    lastUpdate.textContent = 'Nie synchronisiert';
                }
            }
        }

        // Event Creation
        function createNewEvent() {
            showModal('event-modal', 'Neues Event erstellen', `
                <form id="eventForm">
                    <div style="display: flex; flex-direction: column; gap: var(--space-4);">
                        <div>
                            <label for="eventTitle" style="display: block; margin-bottom: var(--space-2); font-weight: var(--font-weight-medium);">Titel</label>
                            <input type="text" id="eventTitle" name="title" style="width: 100%; padding: var(--space-3); border: 1px solid var(--border-base); border-radius: var(--radius-md);" required>
                        </div>
                        <div>
                            <label for="eventDate" style="display: block; margin-bottom: var(--space-2); font-weight: var(--font-weight-medium);">Datum</label>
                            <input type="date" id="eventDate" name="date" style="width: 100%; padding: var(--space-3); border: 1px solid var(--border-base); border-radius: var(--radius-md);" required>
                        </div>
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: var(--space-3);">
                            <div>
                                <label for="eventTime" style="display: block; margin-bottom: var(--space-2); font-weight: var(--font-weight-medium);">Startzeit</label>
                                <input type="time" id="eventTime" name="time" style="width: 100%; padding: var(--space-3); border: 1px solid var(--border-base); border-radius: var(--radius-md);" required>
                            </div>
                            <div>
                                <label for="eventEndTime" style="display: block; margin-bottom: var(--space-2); font-weight: var(--font-weight-medium);">Endzeit</label>
                                <input type="time" id="eventEndTime" name="endTime" style="width: 100%; padding: var(--space-3); border: 1px solid var(--border-base); border-radius: var(--radius-md);" required>
                            </div>
                        </div>
                        <div>
                            <label for="eventDescription" style="display: block; margin-bottom: var(--space-2); font-weight: var(--font-weight-medium);">Beschreibung</label>
                            <textarea id="eventDescription" name="description" rows="3" style="width: 100%; padding: var(--space-3); border: 1px solid var(--border-base); border-radius: var(--radius-md); resize: vertical;"></textarea>
                        </div>
                        <div>
                            <label for="eventLocation" style="display: block; margin-bottom: var(--space-2); font-weight: var(--font-weight-medium);">Ort</label>
                            <input type="text" id="eventLocation" name="location" style="width: 100%; padding: var(--space-3); border: 1px solid var(--border-base); border-radius: var(--radius-md);">
                        </div>
                        <div>
                            <label for="eventPriority" style="display: block; margin-bottom: var(--space-2); font-weight: var(--font-weight-medium);">Priorit√§t</label>
                            <select id="eventPriority" name="priority" style="width: 100%; padding: var(--space-3); border: 1px solid var(--border-base); border-radius: var(--radius-md);">
                                <option value="low">Niedrig</option>
                                <option value="medium" selected>Mittel</option>
                                <option value="high">Hoch</option>
                                <option value="urgent">Dringend</option>
                            </select>
                        </div>
                    </div>
                </form>
            `, [
                { text: 'Abbrechen', action: 'closeModal', class: 'btn-secondary' },
                { text: 'Event erstellen', action: 'createEvent', class: 'btn-primary' }
            ]);
        }


        async function createEvent() {
            const form = document.getElementById('eventForm');
            const formData = new FormData(form);

            const eventData = {
                title: formData.get('title'),
                start_time: `${formData.get('date')}T${formData.get('time')}:00`,
                priority: formData.get('priority'),
                description: formData.get('description') || ''
            };

            try {
                const response = await fetch('/api/v1/events', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${window.CHRONOS_CONFIG.API_KEY}`
                    },
                    body: JSON.stringify(eventData)
                });

                if (!response.ok) {
                    throw new Error(`HTTP ${response.status}: ${response.statusText}`);
                }

                const result = await response.json();
                showToast('Event erstellt', `"${eventData.title}" wurde erfolgreich erstellt`, 'success');
                closeModal();

                // Dashboard neu laden um neues Event anzuzeigen
                await loadDashboardData();

            } catch (error) {
                console.error('Fehler beim Erstellen des Events:', error);
                showToast('Fehler', 'Event konnte nicht erstellt werden: ' + error.message, 'error');
            }
        }

        // Utility Functions
        function showLoading() {
            const overlay = document.getElementById('loadingOverlay');
            if (overlay) {
                overlay.style.display = 'flex';
                overlay.setAttribute('aria-hidden', 'false');
            }
        }

        function hideLoading() {
            const overlay = document.getElementById('loadingOverlay');
            if (overlay) {
                overlay.style.display = 'none';
                overlay.setAttribute('aria-hidden', 'true');
            }
        }

        // Toast System
        function showToast(title, message, type = 'info') {
            const toastContainer = document.getElementById('toastContainer') || createToastContainer();
            const toast = document.createElement('div');
            toast.className = `toast ${type}`;
            toast.setAttribute('role', 'alert');

            toast.innerHTML = `
                <div class="toast-header">
                    <h4 class="toast-title">${title}</h4>
                    <button class="toast-close" onclick="removeToast(this.parentElement.parentElement)" aria-label="Benachrichtigung schlie√üen">
                        <span aria-hidden="true">√ó</span>
                    </button>
                </div>
                <div class="toast-body">${message}</div>
            `;

            toastContainer.appendChild(toast);

            // Animate in
            setTimeout(() => {
                toast.classList.add('show');
            }, 100);

            // Auto-remove nach 8 Sekunden
            setTimeout(() => {
                removeToast(toast);
            }, 8000);
        }

        function createToastContainer() {
            const container = document.createElement('div');
            container.id = 'toastContainer';
            container.className = 'toast-container';
            container.setAttribute('role', 'region');
            container.setAttribute('aria-live', 'polite');
            container.setAttribute('aria-label', 'Benachrichtigungen');
            document.body.appendChild(container);
            return container;
        }

        function removeToast(toast) {
            if (toast && toast.parentElement) {
                toast.classList.add('fade-out');
                setTimeout(() => {
                    if (toast.parentElement) {
                        toast.remove();
                    }
                }, 400);
            }
        }

        // Performance Monitoring (optional)
        if ('performance' in window) {
            window.addEventListener('load', function() {
                const loadTime = performance.timing.loadEventEnd - performance.timing.navigationStart;
                console.log(`Dashboard geladen in ${loadTime}ms`);
            });
        }

        // Modal System
        function showModal(id, title, content, actions = '') {
            // Remove existing modal if any
            const existingModal = document.getElementById('modal-overlay');
            if (existingModal) {
                existingModal.remove();
            }

            // Create modal overlay
            const overlay = document.createElement('div');
            overlay.id = 'modal-overlay';
            overlay.className = 'modal-overlay';
            overlay.innerHTML = `
                <div class="modal-dialog" role="dialog" aria-labelledby="modal-title">
                    <div class="modal-header">
                        <h3 id="modal-title">${title}</h3>
                        <button class="modal-close" onclick="closeModal()" aria-label="Modal schlie√üen">
                            <span aria-hidden="true">√ó</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        ${content}
                    </div>
                    <div class="modal-footer">
                        ${actions || '<button class="btn btn-secondary" onclick="closeModal()">Abbrechen</button><button class="btn btn-primary" onclick="submitEventForm()">Erstellen</button>'}
                    </div>
                </div>
            `;

            document.body.appendChild(overlay);

            // Show modal with animation
            setTimeout(() => {
                overlay.classList.add('show');
            }, 10);

            // Focus management
            const firstInput = overlay.querySelector('input, textarea, select, button');
            if (firstInput) firstInput.focus();
        }

        function closeModal() {
            const overlay = document.getElementById('modal-overlay');
            if (overlay) {
                overlay.classList.remove('show');
                setTimeout(() => {
                    overlay.remove();
                }, 200);
            }
        }

        function submitEventForm() {
            const form = document.getElementById('eventForm');
            if (form && form.checkValidity()) {
                const formData = new FormData(form);

                // Convert form data to event object
                const eventData = {
                    summary: formData.get('title'),
                    start_time: formData.get('date') + 'T' + formData.get('time'),
                    end_time: formData.get('date') + 'T' + formData.get('endTime'),
                    description: formData.get('description') || '',
                    location: formData.get('location') || ''
                };

                // Send to API
                fetch('/api/v1/events', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${window.CHRONOS_CONFIG.API_KEY}`
                    },
                    body: JSON.stringify(eventData)
                })
                .then(response => response.json())
                .then(result => {
                    closeModal();
                    showToast('Erfolg', 'Event erfolgreich erstellt!', 'success');
                    // Refresh dashboard data
                    setTimeout(refreshDashboard, 1000);
                })
                .catch(error => {
                    console.error('Error creating event:', error);
                    showToast('Fehler', 'Event konnte nicht erstellt werden.', 'error');
                });
            } else {
                showToast('Fehler', 'Bitte f√ºllen Sie alle Pflichtfelder aus.', 'error');
            }
        }

        // MISSING CORE FUNCTIONS - IMMEDIATE IMPLEMENTATION

        // Sidebar Management
        function closeSidebar() {
            const sidebar = document.getElementById('sidebar');
            const overlay = document.getElementById('sidebarOverlay');
            if (sidebar) sidebar.classList.remove('open');
            if (overlay) overlay.classList.remove('show');
            document.body.classList.remove('sidebar-open');
        }

        function toggleSidebar() {
            const sidebar = document.getElementById('sidebar');
            const overlay = document.getElementById('sidebarOverlay');
            if (sidebar && overlay) {
                sidebar.classList.toggle('open');
                overlay.classList.toggle('show');
                document.body.classList.toggle('sidebar-open');
            }
        }

        // Event Details System
        async function viewEventDetails(eventId) {
            try {
                showToast('Info', 'Lade Event-Details...', 'info');

                const response = await fetch(`/api/v1/events/${eventId}`, {
                    headers: {
                        'Authorization': `Bearer ${window.CHRONOS_CONFIG.API_KEY}`
                    }
                });

                if (!response.ok) {
                    throw new Error(`HTTP ${response.status}: ${response.statusText}`);
                }

                const event = await response.json();

                // Format dates for display
                const startDate = new Date(event.start_time);
                const endDate = new Date(event.end_time);
                const formatDate = (date) => date.toLocaleDateString('de-DE', {
                    weekday: 'long', year: 'numeric', month: 'long', day: 'numeric'
                });
                const formatTime = (date) => date.toLocaleTimeString('de-DE', {
                    hour: '2-digit', minute: '2-digit'
                });

                showModal('event-details-modal', 'Event Details', `
                    <div style="display: flex; flex-direction: column; gap: var(--space-4);">
                        <div class="event-detail-header">
                            <h3 style="margin: 0; color: var(--primary-600);">${event.summary || 'Unbenanntes Event'}</h3>
                            <div style="display: flex; gap: var(--space-2); margin-top: var(--space-2);">
                                <span class="priority-badge priority-${event.priority || 'medium'}">${(event.priority || 'medium').toUpperCase()}</span>
                                <span class="status-badge">${event.status || 'Geplant'}</span>
                            </div>
                        </div>

                        <div class="event-time-info" style="background: var(--neutral-50); padding: var(--space-4); border-radius: var(--radius-md);">
                            <div style="display: grid; grid-template-columns: auto 1fr; gap: var(--space-3); align-items: center;">
                                <span style="font-weight: var(--font-weight-medium);">üìÖ Datum:</span>
                                <span>${formatDate(startDate)}</span>
                                <span style="font-weight: var(--font-weight-medium);">‚è∞ Zeit:</span>
                                <span>${formatTime(startDate)} - ${formatTime(endDate)}</span>
                                ${event.location ? `<span style="font-weight: var(--font-weight-medium);">üìç Ort:</span><span>${event.location}</span>` : ''}
                            </div>
                        </div>

                        ${event.description ? `
                            <div class="event-description">
                                <h4 style="margin: 0 0 var(--space-2) 0;">Beschreibung:</h4>
                                <p style="margin: 0; line-height: var(--line-height-base); color: var(--text-secondary);">${event.description}</p>
                            </div>
                        ` : ''}

                        <div class="event-metadata" style="font-size: var(--font-size-sm); color: var(--text-muted); border-top: 1px solid var(--border-subtle); padding-top: var(--space-3);">
                            <div>Event-ID: ${eventId}</div>
                            ${event.created ? `<div>Erstellt: ${new Date(event.created).toLocaleString('de-DE')}</div>` : ''}
                            ${event.updated ? `<div>Aktualisiert: ${new Date(event.updated).toLocaleString('de-DE')}</div>` : ''}
                        </div>
                    </div>
                `, `
                    <button class="btn btn-secondary" onclick="closeModal()">Schlie√üen</button>
                    <button class="btn btn-primary" onclick="editEvent('${eventId}')">Bearbeiten</button>
                    <button class="btn btn-danger" onclick="deleteEvent('${eventId}')">L√∂schen</button>
                `);

            } catch (error) {
                console.error('Error loading event details:', error);
                showToast('Fehler', 'Event-Details konnten nicht geladen werden: ' + error.message, 'error');
            }
        }

        // Calendar Navigation State
        let currentCalendarDate = new Date();
        let currentCalendarView = 'month'; // month, week, day

        // Calendar Navigation Functions
        function refreshCalendar() {
            loadCalendarEvents();
        }

        function navigateCalendar(direction) {
            if (direction === 'prev') {
                if (currentCalendarView === 'month') {
                    currentCalendarDate.setMonth(currentCalendarDate.getMonth() - 1);
                } else if (currentCalendarView === 'week') {
                    currentCalendarDate.setDate(currentCalendarDate.getDate() - 7);
                } else if (currentCalendarView === 'day') {
                    currentCalendarDate.setDate(currentCalendarDate.getDate() - 1);
                }
            } else if (direction === 'next') {
                if (currentCalendarView === 'month') {
                    currentCalendarDate.setMonth(currentCalendarDate.getMonth() + 1);
                } else if (currentCalendarView === 'week') {
                    currentCalendarDate.setDate(currentCalendarDate.getDate() + 7);
                } else if (currentCalendarView === 'day') {
                    currentCalendarDate.setDate(currentCalendarDate.getDate() + 1);
                }
            }
            updateCalendarDisplay();
            loadCalendarEvents();
        }

        function goToToday() {
            currentCalendarDate = new Date();
            updateCalendarDisplay();
            loadCalendarEvents();
        }

        function switchView(view) {
            if (['month', 'week', 'day'].includes(view)) {
                currentCalendarView = view;
                updateCalendarDisplay();
                loadCalendarEvents();

                // Update active button state
                document.querySelectorAll('.view-button').forEach(btn => {
                    btn.classList.remove('active');
                });
                document.querySelector(`[data-view="${view}"]`)?.classList.add('active');
            }
        }

        function updateCalendarDisplay() {
            const titleElement = document.querySelector('.calendar-title');
            if (titleElement) {
                const options = {
                    year: 'numeric',
                    month: 'long'
                };
                if (currentCalendarView === 'week') {
                    const weekStart = new Date(currentCalendarDate);
                    weekStart.setDate(currentCalendarDate.getDate() - currentCalendarDate.getDay());
                    const weekEnd = new Date(weekStart);
                    weekEnd.setDate(weekStart.getDate() + 6);
                    titleElement.textContent = `${weekStart.toLocaleDateString('de-DE')} - ${weekEnd.toLocaleDateString('de-DE')}`;
                } else if (currentCalendarView === 'day') {
                    titleElement.textContent = currentCalendarDate.toLocaleDateString('de-DE', {
                        weekday: 'long',
                        year: 'numeric',
                        month: 'long',
                        day: 'numeric'
                    });
                } else {
                    titleElement.textContent = currentCalendarDate.toLocaleDateString('de-DE', options);
                }
            }
        }

        async function loadCalendarEvents() {
            try {
                const startDate = getViewStartDate();
                const endDate = getViewEndDate();

                const response = await fetch(`/api/v1/events?start=${startDate}&end=${endDate}`, {
                    headers: {
                        'Authorization': `Bearer ${window.CHRONOS_CONFIG.API_KEY}`
                    }
                });

                if (response.ok) {
                    const events = await response.json();
                    renderCalendarEvents(events);
                } else {
                    console.error('Failed to load calendar events:', response.status);
                }
            } catch (error) {
                console.error('Error loading calendar events:', error);
            }
        }

        function getViewStartDate() {
            const date = new Date(currentCalendarDate);
            if (currentCalendarView === 'month') {
                date.setDate(1);
            } else if (currentCalendarView === 'week') {
                date.setDate(date.getDate() - date.getDay());
            }
            return date.toISOString().split('T')[0];
        }

        function getViewEndDate() {
            const date = new Date(currentCalendarDate);
            if (currentCalendarView === 'month') {
                date.setMonth(date.getMonth() + 1);
                date.setDate(0);
            } else if (currentCalendarView === 'week') {
                date.setDate(date.getDate() - date.getDay() + 6);
            }
            return date.toISOString().split('T')[0];
        }

        function renderCalendarEvents(events) {
            const calendarContainer = document.querySelector('.calendar-events');
            if (!calendarContainer) return;

            calendarContainer.innerHTML = '';

            events.forEach(event => {
                const eventElement = document.createElement('div');
                eventElement.className = 'calendar-event';
                eventElement.innerHTML = `
                    <div class="event-time">${new Date(event.start_time).toLocaleTimeString('de-DE', { hour: '2-digit', minute: '2-digit' })}</div>
                    <div class="event-title">${event.summary}</div>
                `;
                eventElement.onclick = () => viewEventDetails(event.id);
                calendarContainer.appendChild(eventElement);
            });
        }

        function viewAllDayEvents() {
            const startDate = getViewStartDate();
            const endDate = getViewEndDate();

            fetch(`/api/v1/events?start=${startDate}&end=${endDate}&all_day=true`, {
                headers: {
                    'Authorization': `Bearer ${window.CHRONOS_CONFIG.API_KEY}`
                }
            })
            .then(response => response.json())
            .then(events => {
                const allDayEvents = events.filter(event => {
                    const start = new Date(event.start_time);
                    const end = new Date(event.end_time);
                    return (end - start) >= 24 * 60 * 60 * 1000; // 24 hours or more
                });

                showModal('all-day-events', 'Ganztages-Events', `
                    <div class="all-day-events-list">
                        ${allDayEvents.map(event => `
                            <div class="all-day-event" onclick="viewEventDetails('${event.id}')">
                                <div class="event-title">${event.summary}</div>
                                <div class="event-date">${new Date(event.start_time).toLocaleDateString('de-DE')}</div>
                            </div>
                        `).join('')}
                    </div>
                `, '<button class="btn btn-secondary" onclick="closeModal()">Schlie√üen</button>');
            })
            .catch(error => {
                console.error('Error loading all-day events:', error);
            });
        }

        // Analytics Functions
        function refreshAnalytics() {
            showToast('Info', 'Analytics werden aktualisiert...', 'info');
            // Refresh analytics data
            setTimeout(() => {
                showToast('Erfolg', 'Analytics aktualisiert!', 'success');
            }, 1000);
        }

        function exportAnalytics() {
            showToast('Info', 'Exportiere Analytics...', 'info');
            // Export analytics data
            const data = {
                timestamp: new Date().toISOString(),
                metrics: 'analytics-data-placeholder'
            };
            const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `chronos-analytics-${new Date().toISOString().split('T')[0]}.json`;
            a.click();
            URL.revokeObjectURL(url);
            showToast('Erfolg', 'Analytics exportiert!', 'success');
        }

        function setTimeRange(range) {
            showToast('Info', `Zeitbereich gesetzt auf: ${range}`, 'info');
            // Set analytics time range
            console.log(`Analytics time range set to: ${range}`);
        }

        function switchChartType(chart, type) {
            showToast('Info', `Chart-Typ ge√§ndert: ${chart} -> ${type}`, 'info');
            // Switch chart visualization type
            console.log(`Switching ${chart} chart to ${type}`);
        }

        function applyInsight(id) {
            showToast('Erfolg', `AI-Insight ${id} angewendet!`, 'success');
            // Apply AI insight
            console.log(`Applying insight: ${id}`);
        }

        function dismissInsight(id) {
            showToast('Info', `Insight ${id} ausgeblendet`, 'info');
            // Dismiss AI insight
            console.log(`Dismissing insight: ${id}`);
        }

        function generateReport() {
            showToast('Info', 'Generiere Report...', 'info');
            // Generate analytics report
            setTimeout(() => {
                showToast('Erfolg', 'Report generiert!', 'success');
            }, 2000);
        }

        // Template Management Functions
        function createNewTemplate() {
            showModal('template-modal', 'Neue Vorlage erstellen', `
                <form id="templateForm">
                    <div style="display: flex; flex-direction: column; gap: var(--space-4);">
                        <div>
                            <label for="templateName" style="display: block; margin-bottom: var(--space-2); font-weight: var(--font-weight-medium);">Name der Vorlage</label>
                            <input type="text" id="templateName" name="name" style="width: 100%; padding: var(--space-3); border: 1px solid var(--border-base); border-radius: var(--radius-md);" required>
                        </div>
                        <div>
                            <label for="templateDescription" style="display: block; margin-bottom: var(--space-2); font-weight: var(--font-weight-medium);">Beschreibung</label>
                            <textarea id="templateDescription" name="description" rows="3" style="width: 100%; padding: var(--space-3); border: 1px solid var(--border-base); border-radius: var(--radius-md);"></textarea>
                        </div>
                        <div>
                            <label for="templateCategory" style="display: block; margin-bottom: var(--space-2); font-weight: var(--font-weight-medium);">Kategorie</label>
                            <select id="templateCategory" name="category" style="width: 100%; padding: var(--space-3); border: 1px solid var(--border-base); border-radius: var(--radius-md);">
                                <option value="meeting">Meeting</option>
                                <option value="task">Aufgabe</option>
                                <option value="appointment">Termin</option>
                                <option value="reminder">Erinnerung</option>
                            </select>
                        </div>
                    </div>
                </form>
            `, '<button class="btn btn-secondary" onclick="closeModal()">Abbrechen</button><button class="btn btn-primary" onclick="saveTemplate()">Vorlage speichern</button>');
        }

        function saveTemplate() {
            const form = document.getElementById('templateForm');
            if (form && form.checkValidity()) {
                const formData = new FormData(form);
                const templateData = {
                    name: formData.get('name'),
                    description: formData.get('description'),
                    category: formData.get('category')
                };

                // Save template (placeholder implementation)
                console.log('Saving template:', templateData);
                closeModal();
                showToast('Erfolg', 'Vorlage erfolgreich gespeichert!', 'success');
            } else {
                showToast('Fehler', 'Bitte f√ºllen Sie alle Pflichtfelder aus.', 'error');
            }
        }

        function editTemplate(id) {
            showToast('Info', `Bearbeite Vorlage ${id}...`, 'info');
            // TODO: Implement template editing
        }

        function useTemplate(id) {
            showToast('Erfolg', `Vorlage ${id} verwendet!`, 'success');
            // TODO: Implement template usage
        }

        function deleteTemplate(id) {
            if (confirm('Sind Sie sicher, dass Sie diese Vorlage l√∂schen m√∂chten?')) {
                showToast('Erfolg', `Vorlage ${id} gel√∂scht!`, 'success');
                // TODO: Implement template deletion
            }
        }

        // Settings Functions
        function saveSettings() {
            showToast('Info', 'Speichere Einstellungen...', 'info');

            // Collect all settings from forms
            const settings = {};
            const forms = document.querySelectorAll('form[data-settings]');

            forms.forEach(form => {
                const formData = new FormData(form);
                const category = form.dataset.settings;
                settings[category] = {};

                for (let [key, value] of formData.entries()) {
                    settings[category][key] = value;
                }
            });

            // Save to localStorage as fallback
            try {
                localStorage.setItem('chronos_settings', JSON.stringify(settings));
                setTimeout(() => {
                    showToast('Erfolg', 'Einstellungen gespeichert!', 'success');
                }, 500);
            } catch (error) {
                showToast('Fehler', 'Einstellungen konnten nicht gespeichert werden.', 'error');
            }
        }

        function testCalDAVConnection() {
            showToast('Info', 'Teste CalDAV-Verbindung...', 'info');

            // Test CalDAV connection
            fetch('/api/v1/caldav/test-connection', {
                method: 'POST',
                headers: {
                    'Authorization': `Bearer ${window.CHRONOS_CONFIG.API_KEY}`,
                    'Content-Type': 'application/json'
                }
            })
            .then(response => response.json())
            .then(result => {
                if (result.success) {
                    showToast('Erfolg', 'CalDAV-Verbindung erfolgreich!', 'success');
                } else {
                    showToast('Fehler', 'CalDAV-Verbindung fehlgeschlagen: ' + result.error, 'error');
                }
            })
            .catch(error => {
                showToast('Fehler', 'Verbindungstest fehlgeschlagen: ' + error.message, 'error');
            });
        }

        function regenerateApiKey() {
            if (confirm('Sind Sie sicher? Der alte API-Schl√ºssel wird ung√ºltig.')) {
                showToast('Info', 'Generiere neuen API-Schl√ºssel...', 'info');

                fetch('/api/v1/admin/regenerate-api-key', {
                    method: 'POST',
                    headers: {
                        'Authorization': `Bearer ${window.CHRONOS_CONFIG.API_KEY}`
                    }
                })
                .then(response => response.json())
                .then(result => {
                    if (result.success) {
                        window.CHRONOS_CONFIG.API_KEY = result.new_key;
                        showToast('Erfolg', 'API-Schl√ºssel erfolgreich erneuert!', 'success');

                        // Update displayed key
                        const keyDisplay = document.getElementById('apiKeyDisplay');
                        if (keyDisplay) {
                            keyDisplay.textContent = result.new_key;
                        }
                    } else {
                        showToast('Fehler', 'API-Schl√ºssel konnte nicht erneuert werden.', 'error');
                    }
                })
                .catch(error => {
                    showToast('Fehler', 'Fehler beim Erneuern des API-Schl√ºssels: ' + error.message, 'error');
                });
            }
        }

        // Load settings on page load
        function loadSettings() {
            try {
                const settings = localStorage.getItem('chronos_settings');
                if (settings) {
                    const parsed = JSON.parse(settings);

                    // Apply loaded settings to forms
                    Object.keys(parsed).forEach(category => {
                        const form = document.querySelector(`form[data-settings="${category}"]`);
                        if (form) {
                            Object.keys(parsed[category]).forEach(key => {
                                const field = form.querySelector(`[name="${key}"]`);
                                if (field) {
                                    if (field.type === 'checkbox') {
                                        field.checked = parsed[category][key] === 'on';
                                    } else {
                                        field.value = parsed[category][key];
                                    }
                                }
                            });
                        }
                    });
                }
            } catch (error) {
                console.warn('Could not load settings:', error);
            }
        }

        // Global function registration
        window.closeSidebar = closeSidebar;
        window.toggleSidebar = toggleSidebar;
        window.viewEventDetails = viewEventDetails;
        window.refreshCalendar = refreshCalendar;
        window.navigateCalendar = navigateCalendar;
        window.goToToday = goToToday;
        window.switchView = switchView;
        window.viewAllDayEvents = viewAllDayEvents;
        window.refreshAnalytics = refreshAnalytics;
        window.exportAnalytics = exportAnalytics;
        window.setTimeRange = setTimeRange;
        window.switchChartType = switchChartType;
        window.applyInsight = applyInsight;
        window.dismissInsight = dismissInsight;
        window.generateReport = generateReport;
        window.createNewTemplate = createNewTemplate;
        window.saveTemplate = saveTemplate;
        window.editTemplate = editTemplate;
        window.useTemplate = useTemplate;
        window.deleteTemplate = deleteTemplate;
        window.saveSettings = saveSettings;
        window.testCalDAVConnection = testCalDAVConnection;
        window.regenerateApiKey = regenerateApiKey;
        window.loadSettings = loadSettings;

        // Auto-load settings when page loads
        document.addEventListener('DOMContentLoaded', loadSettings);
    </script>

    <!-- Service Worker Registration removed - not implemented yet -->
</body>
</html>